#portal-globalnav-wrapper{
    padding-left: 0!important;
    padding-right: 0!important;
    padding-top: 0!important;
    padding-bottom:0!important;
    position: initial!important;
    span {
        padding: 1rem 0;    
    }
    ul {
        padding-left: 0;
    }
    #portal-globalnav-collapse{
        #portal-globalnav{
            width: 100%;
            @include media-breakpoint-up(md){
                flex-direction: column;
                gap: 15px;
            }
            @include media-breakpoint-up(lg) {
                flex-direction: row;
            }
            @include media-breakpoint-up(xl) {
                gap: $nav-first-level-gap;
            }
            .index_html {
                display: none;
            }
            li {
                ul {
                    transition: ease-out 2.75s;
                    left: 0;
                }
                a{
                    position: relative;
                    display: block;
                    padding: .75rem 1rem;
                    hyphens: auto;
                    word-break: break-word;
                    text-decoration: none;
                }
                .opener {
                    display: none;
                }
                &.show-nav > .has_subtree.dropdown{
                  visibility: visible;
                  opacity: 1;
                  z-index: 1;
                  a{
                      pointer-events: initial!important;
                  }
                }
                &.show-nav > .has_subtree{
                  visibility: visible;
                  .show-nav > .dropdown{
                    left: 25.5em;
                    .dropdown{
                        left: 21.5em;
                    }
                  }
                }
                & > .has_subtree {
                    padding: 2em;
                    background: #fff;
                    width: 21em;
                    &.dropdown{
                        position: absolute;
                        left: 0;
                        .has_subtree.dropdown {
                            top: 0;
                        }
                    }
                }
                &.has_subtree .has_subtree ul {
                  z-index: 0;
                  left: 0em;
                  top: 0px;
                }
            }
            & > li {
                & > a{
                padding: 0;
                color: pink;
                    @if($nav-first-level-uppercase){
                        text-transform: uppercase;
                    }
                }
                & > .has_subtree{
                    width: 25em;
                    .close-nav {
                        border-bottom: none !important;
                        position: absolute;
                        top: 0;
                        right: 1.5em;
                        z-index: 99;
                        .close-nav-icon {
                          height: 20px;
                          width: 20px;
                          display: block;
                          background-color: red;
                          padding: 0;
                        }
                    }
                  }
            }
            div.has_subtree {
                & > span {
                    color: yellow;
                }
                &.dropdown{
                    @include media-breakpoint-up(md){
                        height: 800px;
                        max-height: 85vh;
                        min-height: 350px;
                        display: flex;
                        flex-direction: column;
                        & > ul {
                            overflow-y: auto;
                        }
                    }
                    @include media-breakpoint-up(lg){
                        margin-top: 2.25rem;
                    }
                    @include media-breakpoint-down(lg) {
                        overflow: hidden;
                        overflow-y: scroll;
                    }
                }
                .close-nav .close-nav-icon {
                    height: 20px;
                    width: 20px;
                    display: block;
                    background-image: url("../../assets/svg/close.svg");
                    padding: 0;
                }
            }
            .dropdown{
                background-color: aqua;
                visibility: hidden;
                opacity: 0;
                a{
                    padding: 1rem 0;
                    border-bottom: 1px solid #DDDDDD;
                    pointer-events: none;
                }
                .nav-title{
                    padding: 0!important;
                    a{
                        color: $primary;
                    }
                }
                .nav-link{
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    color: #000;
                    &:hover,
                    &:focus{
                        color: $primary;
                    }
                    .state-private{
                        color: #c4183c;
                    }
                }
            }
            .quick-access{
                ul{
                    position: relative!important;
                    padding: 0!important;
                    width: auto!important;
                }
            }
        }
        &.activated{
            & > ul > li > a{
                @include media-breakpoint-up(md){
                    color: #fff!important;
                }
            }
        }
    }
    label[role="button"] {
        position: absolute;
    }
}


.close-nav,.prev-nav{
    cursor: pointer;
  }
.prev-nav{
    @include media-breakpoint-down(lg){
        display: block!important;
    }
    @include media-breakpoint-up(lg){
        display: none!important;
    }
  }

////// A SUPPRIMER PLUSTARD




// #subsite-navigation {
//     & > ul {
//         gap: 15px;
//     }
// }

// #subsite-navigation ul:first-child {
// 	overflow-y: hidden;
// }
// #subsite-navigation > ul li > .has_subtree.dropdown {
// 	box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
// }
// #subsite-navigation > ul li > .has_subtree.dropdown .has_subtree.dropdown {
//     @include media-breakpoint-down(lg){
// 	    box-shadow: none!important;
//     }
// }

// #subsite-navigation li .has_subtree.dropdown {
//     @include media-breakpoint-down(lg){
//         right: inherit;
//         left: 0 !important;
//     }
// }



// Align je suis je trouve right
#portal-globalnav{
    // & > .nav-item.has_subtree:not(.je-suis):not(.en-un-clic){
    //     & > .nav-link{
    //         display: flex;
    //         align-items: center;
    //     @include media-breakpoint-up(lg){
    //         &:after{
    //             content:"";
    //             width: 9px;
    //             height: 6px;
    //             display: block;
    //             background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"  width="8.444" height="5.2"><path fill="black" d="M.247.254a.831.831 0 0 1 1.2 0l2.78 2.854L7.011.254A.831.831 0 0 1 8.2.264a.882.882 0 0 1 .01 1.215L4.825 4.946a.835.835 0 0 1-.6.254 1.529 1.529 0 0 1-.6-.254L.247 1.479a.882.882 0 0 1 0-1.226Z"/></svg>');
    //             background-size: contain;
    //             background-position: center;
    //             background-repeat: no-repeat;
    //             margin-left: 0.4rem;
    //         }
    //     }
    // }
    // }
  }


// #subsite-navigation{
//     & > ul{
//         white-space: inherit;
//         & > li > a{
//             white-space: nowrap;
//         }
//     }
//     & > ul > .has_subtree.nav-item{
//         & > .nav-link{
//             display: flex;
//             align-items: center;
//             &:after{
//                 content: url("../../assets/svg/drop-down-arrow.svg");
//                 display: flex;
//                 align-items: center;
//                 padding-left: 0.4rem;
//             }
//         }
//     }
// }

// #portal-globalnav-collapse, #subsite-navigation{
//     .dropdown{
//         // .show-nav{
//         //    & > .nav-link{
//         //         color: $primary;
//         //         &[aria-haspopup="true"]{
//         //             &:after{
//         //                 content: url("../../assets/svg/drop-down-arrow-blue.svg");
//         //                 right: 0;

//         //             }
//         //         }
//         //     }
//         // }
//         // .nav-link{
//         //     &[aria-haspopup="true"]{
//         //         &:after{
//         //             content: url("../../assets/svg/arrow-right-blue.svg");
//         //             content: url("../../assets/svg/arrow-right.svg");
//         //             position: relative;
//         //             right: 11px;
//         //             transition: all .2s ease;
//         //         }
//         //         &:hover,
//         //         &:focus{
//         //             &:after{
//         //                 content: url("../../assets/svg/arrow-right-blue.svg");
//         //             }
//         //         }
//         //     }
//         // }
//     }
//     & > ul {
//         & > li{
//             & > a{
//                 // First nav link hover line
//                 // &:before{
//                 //     content: "";       
//                 //     height: 2px;
//                 //     position: absolute;
//                 //     left: 0;
//                 //     background-color: $yellow;
//                 //     bottom: 0;
//                 //     transition: all .3s ease;
//                 //     right: 0; 
//                 //     width: 0;
//                 // }
//                 // @media (hover: hover) and (pointer: fine) {
//                 //     &:focus,
//                 //     &:hover{
//                 //         &:before{
//                 //             width: 100%;
//                 //         }
//                 //     }
//                 // }
//             }
//         }
//     }
    
// }

// // ARROW RIGHT
// @media screen and (max-width:992px) {
//     #portal-globalnav-collapse{
//         #portal-globalnav > li > .nav-link{
//             border-bottom: 1px solid #ddd;
//             &[aria-haspopup="true"]::after {
//                 content: url("../../assets/svg/arrow-right-blue.svg");
//                 content: url("../../assets/svg/arrow-right.svg");
//                 position: relative;
//                 right: 11px;
//             }
//         }
//     }
//     // SUBSITE NAV
//     #subsite-navigation{
//         #portal-globalnav > li > .nav-link{
//             border-bottom: 1px solid #ddd;
//             &[aria-haspopup="true"]::after {
//                 content: url("../../assets/svg/arrow-right-blue.svg");
//                 content: url("../../assets/svg/arrow-right.svg");
//                 position: relative;
//                 right: 11px;
//             }
//         }
//     }
// }
// //burger button
// .navbar-toggler{
//   display: block;
//   position: relative;
//   background: transparent!important;
//   width: 50px;
//   height: 50px;
//   border-radius: 50%;
//   text-align: center;
//   transition: all 0.5s ease;
//   border: 2px solid transparent;
//   .navbar-toggler-icon {
//     display: inline-block;
//     position: absolute;
//     background: #000;
//     margin: 0 auto;
//     width: 18px;
//     height: 2px;
//     top: 50%;
//     left: 0;
//     right: 0;
//     border-radius: 50px;
//     transition: all 0.5s ease;
//     transform: translateY(-1px);
//     &:before,
//     &:after{
//       content: "";
//       border-radius: 50px;
//       position: absolute;
//       margin: 0 auto;
//       background: #000;
//       height: 2px;
//       right: 0;
//       transition: all 0.5s ease;
//     }
//     &:before {
//       bottom: 10px;
//       width: 24px;
//     }
//     &:after {
//       top: 10px;
//       width: 11px;

//     }
//   }
//   &[aria-expanded=true] {
//   .navbar-toggler-icon {
//     background: transparent;
//     &:before, &:after {
//       transform-origin: 0 50%;
//       width: 28.28427125px;
//     }
//     &:before {
//       transform: rotateZ(0.78539816rad)
//     }
//     &:after {
//       transform: rotateZ(-0.78539816rad);
//     }
//   }
//   }
// }











// de core 

//sub site
#subsite-navigation{
  & > ul{
    display: flex;
    flex-direction: column;
    padding-left: 0;
    margin-bottom: 0;
    list-style: none;
    flex-direction: row;
  }
  li{
    a{
      padding: 0.75rem 1rem;
    }
  }
  .has_subtree{
    display: block;
    & .opener ~ ul {
      height: auto;
  }
    > label{
      position: absolute;
      right: 0em;
      top: 0em;
      height: 3em;
      width: 4em;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-end;
      padding-right: 0.5em;
    }
    & > input{
      display: none;
    }
    &:hover{
      & > ul{
        opacity: 1;
        visibility: visible;
      }
    }
    .has_subtree:hover > ul {
      left: 16em;
      top: 0;
  }
  }

}

#subsite-navigation > ul li > .has_subtree.dropdown {
  position: absolute;
  left: 0;
  box-shadow:
  0 1.6px 11.5px rgba(0, 0, 0, 0.024),
  0 4.5px 31.9px rgba(0, 0, 0, 0.035),
  0 10.9px 76.9px rgba(0, 0, 0, 0.046),
  0 36px 255px rgba(0, 0, 0, 0.07);
  .has_subtree.dropdown {
    top: 0;
    max-width: 100%;
  }
}

@media screen and (min-width:992px){
  #portal-globalnav-collapse .dropdown .nav-link, #subsite-navigation .dropdown .nav-link {
      z-index: 99;
  }
}

@media screen and (max-width:992px) {

  .collapse:not(.show) {
      display: block;
      visibility: hidden;
      opacity: 0;
  }
  .navbar-toggler{
      z-index: 99;
  }
  #portal-globalnav-collapse{
      position: fixed;
      height: 100vh;
      top: 0;
      width: 100vw;
      background: #fff;
      z-index: 98;
      left: 100vw;
      padding: 6em 2em 0 2em;
      transition: all .5s cubic-bezier(.54,.01,.68,.64);
      .has_subtree.dropdown{
          top: 0;
          width: 100vw!important;
          box-shadow:
          0 0px 6.5px rgba(0, 0, 0, 0.047),
          0 0px 16.9px rgba(0, 0, 0, 0.067),
          0 0px 33.8px rgba(0, 0, 0, 0.083),
          0 0px 64.5px rgba(0, 0, 0, 0.103),
          0 0px 139px rgba(0, 0, 0, 0.15)
        ;
      }
      #portal-globalnav > li > .nav-link{
          padding: 1rem 0;
          display: flex;
          justify-content: space-between;
          align-items: center;
      }
  }
  .navbar-toggler[aria-expanded=true] + #portal-globalnav-collapse{
      left: 0;
  }
  #portal-globalnav-wrapper .navbar-nav li.show-nav > .has_subtree .show-nav > .dropdown {
      background: #fff;
      z-index: 99;
      height: 100vh;
  }


  #portal-globalnav-wrapper .navbar-nav li {
      .has_subtree.dropdown {
          position: fixed;
          right:-100vw;
          left: inherit;
          transition: right .5s cubic-bezier(.54, .01, .68, .64) , opacity 5s ease , .5s visibility ease;
          z-index: 1;
          height: 100vh;
          
      }
      &.show-nav > .has_subtree.dropdown{
          right: 0;
          left: inherit!important;
          transition: right .5s cubic-bezier(.54,.01,.68,.64);
      }
  }
  .close-nav{
      display: none!important;
  }

  // SUBSITE NAV
  #subsite-navigation{
          .has_subtree.dropdown{
              width: 100vw!important;
              box-shadow:
              0 0px 6.5px rgba(0, 0, 0, 0.047),
              0 0px 16.9px rgba(0, 0, 0, 0.067),
              0 0px 33.8px rgba(0, 0, 0, 0.083),
              0 0px 64.5px rgba(0, 0, 0, 0.103),
              0 0px 139px rgba(0, 0, 0, 0.15)
            ;
          }
          #portal-globalnav > li > .nav-link{
              padding: 1rem 0;
              display: flex;
              justify-content: space-between;
              align-items: center;
          }
          li.show-nav > .has_subtree .show-nav > .dropdown {
              left: 0!important;
          }
          li {
              .has_subtree.dropdown {
                  position: absolute;
                  left: inherit;
                  z-index: 1;
                  left: 0!important;
              }
              &.show-nav > .has_subtree.dropdown{
                  right: 0;
                  left: 5%!important;
                  max-width: 90%;
              }
          }
  }
  #subsite-navigation > ul{
      display: flex;
      flex-wrap: nowrap;
      overflow-x: scroll;
      width: auto;
  }
}
#portal-globalnav-collapse .dropdown .nav-link.state-private, #subsite-navigation .dropdown .nav-link.state-private {
  color: #c4183c;
}



// mobile

    // // nav-mobile
    // .navbar-toggler{
    //     border: 0px!important;
    // }
    // .navbar-toggler:focus{
    //     box-shadow: none!important;
    // }
    // @media screen and (min-width:768px){
    //     .navbar-expand-md .navbar-toggler {
    //         display: block;
    //     }
    // }

    // @media screen and (min-width:992px){
    //     .navbar-expand-md .navbar-toggler {
    //         display: none;
    //     }
    // }



// SUB


#subsite-navigation > ul li > .has_subtree.dropdown .has_subtree.dropdown {
	bottom: 0;
}